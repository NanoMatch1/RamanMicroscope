Okay, in this project folder we have code that is required to run a special type of Raman microscope. This microscope uses a tunable excitation laser and there are separate modules in the code, called instruments, that are responsible for managing and performing specific functions required for the optical microscope. These typically revolve around the use of stepper motors and some electronics hardware such as light-dependent resistors for sensing of light levels and shutters for controlling the light.
Pay close attention to the Arduino sketch code, and the current working code by working through the execution of interface_run_me.py. The firware in the arduino code and the initial sequence of interface_run_me is working code, and we need to update the rest of the codebase to match the new architecture.
IMPORTANT: we are not maintaining backwards compatability - we are rewriting everything to use the new architecture
There are a few things that you need to keep in mind when you're editing this code. Firstly, it should be very readable. Primarily, I would like to favor detailed doc strings over comments throughout the code. Secondly, everything should be modular. I have designed each of these instrument classes so that each particular subclass can be swapped out with a different wrapped hardware. So that is to say the camera classes are all interchangeable if and when I need to change the camera on this setup. So maintaining modularity is key. Also, I'm trying to reduce as many interdependencies as possible. The primary concern really at this point is getting the code up and running as quickly as possible in a way that is fundamentally easy to maintain, keeping in mind things like the modularity and the readability.
The last thing to keep in mind is robustness. I want the code to be as capable of handling errors and issues that might appear as possible whilst still reporting on exactly what's happening. 
This microscope will be used by others, and it will be my job to maintain the code.
Start by examining the code that runs initially from interface_run_me.py, leading up to and including the first "MotionControl.get_motor_positions" call, after which the code will encounter an error as it tries to run legacy code which was intended for use with the old firmware and communicaton protocols.
You should query me for any details that you are unclear on, but your idea is to take this chain of runnable code and then implement the same template of changes in your refactoring of the rest of the code being executed by this interface runme.py.
The motors to be queried or moved at any given time are specified in the microscope.action_groups dictionary. Inside this dictionary you will find human readable labels which correspond to the type of function that the motor does as the key and the value is a string which represents the Arduino code version of that stepper motor label. So you should reference the actiongroups dictionary in order to construct these functions for querying the laser motor positions and grating motor positions, keeping in mind that they can all use the same get_motor_position function by feeding it the correct action_groups dictionary.
We're also not using this "set_positions_A" or "B" format anymore. The controller commands will change to reflect the new architecture. We now use a new format where there is a single function for all motor movement tasks, MotionControl.move_motors. This takes a dictionary of the arduino motor_id and steps as key and value respectively. The function one layer up needs to construct this dictionary from the desired steps for each motor label, and the Microscope.motor_map dictionary (constructed from Microscope.action_groups) to construct the relevant adruino motor_id